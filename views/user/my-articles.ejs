<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/articles.css">
<link rel="stylesheet" href="/css/my-articles.css">
</head>

<body>
    <%- include('../includes/nav.ejs') %>
    <main>
        <h1>Your Articles</h1>

        <% for(var i = 0; i < articles.length; i++) { %>
            <article>              
                <img src="<%= articles[i].image %>" alt="cover-photo">        
                <div  class = 'detail'>                  
                  <h3><%= articles[i].title %></h3>
                  <p><%= articles[i].description %></p>                  
                  <div class="details">                  
                    <span><i class='fas fa-clock'></i>  <%= articles[i].reading_time %></span>
                    <span><i class='fas fa-book-reader'></i> <%= articles[i].read_count %>  </span>
                  </div>
                </div>
                <div class = 'btns'>
                  <a class='edit-article' href="edit-article/<%=articles[i]._id%>">Edit</a> 
                  <form action="/edit-article/<%=articles[i]._id%>/update_state" method="post">
                        <button class="btn" type="submit">
                            <% if (articles[i].state == "draft") { %>
                                Publish
                            <% } else { %>
                                Unpublish
                            <% } %>                            
                        </button>
                                           
                  </form>
                  <form action="/delete-article/<%=articles[i]._id%>" method="post">
                    <button class="delete-btn" type="submit">
                        Delete                          
                    </button>                  
                  </form>            
                </div>             
            </article> 
        <% } %>

    </main>

<%- include('../includes/end.ejs') %>